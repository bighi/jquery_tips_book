<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
	"http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
  <head>
    <title>Better jQuery</title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="../templates/html/layout.css"/>
    <link rel="stylesheet" type="text/css" href="../templates/html/syntax.css"/>
    <link rel="stylesheet" type="text/css" href="../templates/html/user.css"/>

    <meta name="author" content="Leonardo Bighi" />
    <meta name="subject" content="You already know how to use jQuery. Now it's time to get better." />
    <meta name="keywords" content="jquery, javascript, learn, tips, tricks" />
    <meta name="date" content="2012-05-31" />
  </head>
  <body>
    <div class="frontcover container">
      <div>
        <h1>Better jQuery</h1>
        <p class="description">You already know how to use jQuery. Now it's time to get better.</p>
        <p class="authors">Leonardo Bighi</p>
      </div>
    </div>

    <div class="table-of-contents">
      <h2 class="no-toc">Content</h2>
      <div id="toc">
        <div class="level2 beginner-tips"><a href="#beginner-tips"><span>-------- Beginner Tips --------</span></a></div><div class="level3 tip-1-use-jquery-from-google-s-servers"><a href="#tip-1-use-jquery-from-google-s-servers"><span>Tip #1: Use jQuery from Google's Servers</span></a></div><div class="level3 tip-2-how-to-always-load-jquery-s-latest-version"><a href="#tip-2-how-to-always-load-jquery-s-latest-version"><span>Tip #2: How to always load jQuery's latest version</span></a></div><div class="level4 method-1-load-it-from-the-jquery-website"><a href="#method-1-load-it-from-the-jquery-website"><span>Method 1: Load it from the jQuery website</span></a></div><div class="level4 method-2-load-it-from-google"><a href="#method-2-load-it-from-google"><span>Method 2: Load it from Google</span></a></div><div class="level3 tip-3-use-console-log-to-see-what-s-wrong"><a href="#tip-3-use-console-log-to-see-what-s-wrong"><span>Tip #3: Use console.log() to see what's wrong</span></a></div><div class="level3 tip-4-use-id-selector-to-make-code-faster"><a href="#tip-4-use-id-selector-to-make-code-faster"><span>Tip #4: Use #id selector to make code faster</span></a></div><div class="level3 tip-5-don-t-repeat-the-same-selector-over-and-over"><a href="#tip-5-don-t-repeat-the-same-selector-over-and-over"><span>Tip #5: Don't repeat the same selector over and over</span></a></div><div class="level3 tip-6-use-chained-methods-to-shorten-your-code"><a href="#tip-6-use-chained-methods-to-shorten-your-code"><span>Tip #6: Use chained methods to shorten your code</span></a></div><div class="level3 tip-7-wait-for-the-whole-page-to-load"><a href="#tip-7-wait-for-the-whole-page-to-load"><span>Tip #7: Wait for the whole page to load</span></a></div><div class="level3 tip-8-how-to-check-if-an-element-exists"><a href="#tip-8-how-to-check-if-an-element-exists"><span>Tip #8: How to check if an element exists</span></a></div><div class="level3 tip-9-use-no-conflict-mode-to-avoid-guess-what-conflict"><a href="#tip-9-use-no-conflict-mode-to-avoid-guess-what-conflict"><span>Tip #9: Use no-conflict mode to avoid... guess what... conflict!</span></a></div><div class="level3 tip-10-use-a-cheat-sheet"><a href="#tip-10-use-a-cheat-sheet"><span>Tip #10: Use a cheat sheet!</span></a></div><div class="level2 intermediate-tips"><a href="#intermediate-tips"><span>Intermediate Tips</span></a></div><div class="level3 tip-11-create-elements-on-the-fly-with-ease"><a href="#tip-11-create-elements-on-the-fly-with-ease"><span>Tip #11: Create elements on the fly with ease</span></a></div><div class="level3 tip-12-how-to-preload-images"><a href="#tip-12-how-to-preload-images"><span>Tip #12: How to preload images</span></a></div><div class="level3 tip-13-do-something-when-an-image-has-been-loaded"><a href="#tip-13-do-something-when-an-image-has-been-loaded"><span>Tip #13: Do something when an image has been loaded</span></a></div><div class="level3 tip-14-use-animate-to-change-attributes-with-style"><a href="#tip-14-use-animate-to-change-attributes-with-style"><span>Tip #14: Use animate() to change attributes with style</span></a></div><div class="level3 tip-15-use-delay-to-create-sequences-of-animations"><a href="#tip-15-use-delay-to-create-sequences-of-animations"><span>Tip #15: Use delay to create sequences of animations</span></a></div><div class="level4 first-method-function-as-a-parameter-of-animate"><a href="#first-method-function-as-a-parameter-of-animate"><span>First Method: Function as a parameter of animate()</span></a></div><div class="level4 second-method-use-delay"><a href="#second-method-use-delay"><span>Second Method: Use delay()</span></a></div><div class="level3 tip-16-how-to-prevent-the-default-behavior-in-events"><a href="#tip-16-how-to-prevent-the-default-behavior-in-events"><span>Tip #16: How to prevent the default behavior in events</span></a></div><div class="level3 tip-17-don-t-let-ajax-requests-capture-your-this"><a href="#tip-17-don-t-let-ajax-requests-capture-your-this"><span>Tip #17: Don't let ajax requests capture your this</span></a></div><div class="level3 tip-18-set-ajax-defaults-to-standardize-ajax-requests"><a href="#tip-18-set-ajax-defaults-to-standardize-ajax-requests"><span>Tip #18: Set ajax defaults to standardize ajax requests</span></a></div><div class="level4 use-ajaxsetup-to-set-defaults"><a href="#use-ajaxsetup-to-set-defaults"><span>Use ajaxSetup() to set defaults</span></a></div><div class="level4 ajaxstart-and-ajaxcomplete"><a href="#ajaxstart-and-ajaxcomplete"><span>ajaxStart() and ajaxComplete()</span></a></div><div class="level3 tip-19-live-events-can-bind-to-elements-in-the-future"><a href="#tip-19-live-events-can-bind-to-elements-in-the-future"><span>Tip #19: Live events can bind to elements in the future</span></a></div><div class="level4 event-bubbling"><a href="#event-bubbling"><span>Event Bubbling</span></a></div><div class="level4 delegating-events"><a href="#delegating-events"><span>Delegating events</span></a></div><div class="level3 tip-20-use-the-right-event-binding-to-fit-your-needs"><a href="#tip-20-use-the-right-event-binding-to-fit-your-needs"><span>Tip #20: Use the right event binding to fit your needs</span></a></div>
      </div>
    </div>

    <div id="chapters">
      <div class="chapter">
<h2 id="beginner-tips">-------- Beginner Tips --------</h2>

<p>The following 10 tips are very basic ones. They're available here just in case you have missed them when learning jQuery.</p>

<p>If you are more experienced, feel free to jump ahead to the Intermediate section and have fun.</p>


<h3 id="tip-1-use-jquery-from-google-s-servers">Tip #1: Use jQuery from Google's Servers</h3>

<p>You all know how to include the jQuery script in your page. But did you know you can get a little weight off your server by including jquery.js from Google’s servers?</p>

<p>All you have to do is use this script tag:</p>

<div class="highlight">
<pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span> 
</pre>
</div>


<p>This is the path to include version 1.7.2. Change to number to point to whatever version you want to load.</p>

<p>This little trick will make it load faster (Google has better servers than you do) and also save you some bandwidth.</p>

<p>You can also include jQuery-UI by using this script tag:</p>

<div class="highlight">
<pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span> 
</pre>
</div>


<p>Just remember you can change version number to whatever version you want to load.</p>

<p>In case you’re interested in finding out what other libraries you can use from Google’s servers, you can check the Google Libraries API website: https://developers.google.com/speed/libraries/devguide.</p>


<h3 id="tip-2-how-to-always-load-jquery-s-latest-version">Tip #2: How to always load jQuery's latest version</h3>

<p>This is a quick tip expanding on the last one. if you want to always load the latest version of jQuery, there are some ways to do this.</p>

<h4 id="method-1-load-it-from-the-jquery-website">Method 1: Load it from the jQuery website</h4>

<p>Just use this script tag:</p>

<div class="highlight">
<pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://code.jquery.com/jquery-latest.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre>
</div>


<h4 id="method-2-load-it-from-google">Method 2: Load it from Google</h4>

<p>Do you remember what we did in chapter 1? Google allows you to be less specific when picking a version. If you want to load the latest version from the 1.7.x family (anything starting with 1.7), you do:</p>

<div class="highlight">
<pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre>
</div>


<p>If you want to load the latest version from the 1.x.x family (any version starting with 1), you do:</p>

<div class="highlight">
<pre><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
</pre>
</div>



<h3 id="tip-3-use-console-log-to-see-what-s-wrong">Tip #3: Use console.log() to see what's wrong</h3>

<p>During the development of JavaScript code there are surely those moments where you need to check the value of something. Maybe you need to check if a function is being called, or what the hell is being saved on that variable.</p>

<p>For those moments, console.log() is a gift from heavens, brought to you by Zeus himself.</p>

<p>Every modern browser has a JavaScript console, where errors and warnings go to die. In Chrome, for example, you can open it by clicking on the wench icon, then going to the Tools submenu and then clicking on JavaScript Console.</p>

<p>Every message you log using the console.log() command is shown on your browser's JavaScript Console. It's not a jQuery tip <em>per se</em>, but this a great tool when you're doing something complex and error-prone.</p>

<p>You use it like this:</p>

<div class="highlight">
<pre><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"Hello World"</span><span class="p">);</span>
</pre>
</div>


<p>But error messages are not all. The console is so powerful it can help you inspect HTML elements and JavaScript functions. You can inspect a jQuery selector to see if it's capturing the correct element (or elements).</p>

<p>Example:</p>

<div class="highlight">
<pre><span class="nx">element</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'.complex-selector:not(.simple)'</span><span class="p">);</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">element</span><span class="p">);</span>
</pre>
</div>


<p>Then you can see what HTML the variable contains (if any), check the element's properties, etc. If you pass it an object, you can see everything about the object.</p>

<p>So, remember console.log() whenever something is not working as intended. It may save your life! (If your life is the price for not finishing your work in time, I mean)</p>


<h3 id="tip-4-use-id-selector-to-make-code-faster">Tip #4: Use #id selector to make code faster</h3>

<p>jQuery is a fantastic tool that lets you use any CSS3 selector to find HTML elements and some more. But not everyone knows that every selector takes a different time to run.</p>

<p>Let's say you have this HTML element:</p>

<div class="highlight">
<pre><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">"text"</span> <span class="na">id=</span><span class="s">"myid"</span> <span class="na">class=</span><span class="s">"myclass"</span><span class="nt">&gt;</span>
</pre>
</div>


<p>You can find it using many different selectors, like:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'#myid'</span><span class="p">);</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'.myclass'</span><span class="p">)</span>
</pre>
</div>


<p>Everytime you tell jQuery to find an element it will scan the HTML DOM to find what you want. When you are doing it many times in a row, the time it takes to find your element matter a lot.</p>

<p>I did a test in my computer to calculate the difference. I ran both selectors 1000 times in a row and logged the time it took my browser to run it.</p>

<p>When I used the <em>.myclass</em> selector, it took 5.06 seconds. When I used the <em>#myid</em> selector, it took my browser 0.061 seconds to find it one thousand times. That's a <strong>HUGE</strong> difference.</p>

<p>What lesson can we take from this? While you shouldn't go out of your way to make your code faster, but you should use ID to find elements whenever possible.</p>


<h3 id="tip-5-don-t-repeat-the-same-selector-over-and-over">Tip #5: Don't repeat the same selector over and over</h3>

<p>If you read the previous chapter you know that every selector has a cost, and this cost is paid in time. Every time you use a selector, it takes some time for the jQuery engine to find the element in the page.</p>

<p>When you need to work on the same element many times, it's not very effective to make the engine search for your element again and again. Look at the following code:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'.element:first'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){...});</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'.element:first'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"myclass"</span><span class="p">);</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'.element:first'</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">(</span><span class="s1">'slow'</span><span class="p">);</span>
</pre>
</div>


<p>Look at the code. It's not very good, right? Why are we making the jQuery engine search for the same element again? We are losing time here! There's a smarter way to do that.</p>

<div class="highlight">
<pre><span class="nx">first_element</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'.element:first'</span><span class="p">);</span>
<span class="nx">first_element</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){...});</span>
<span class="nx">first_element</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"myclass"</span><span class="p">);</span>
<span class="nx">first_element</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="s1">'slow'</span><span class="p">);</span>
</pre>
</div>


<p>One more line of code, but it's worth it. On the first line we find the element and store it in a variable. Then all we have to do is refer to the variable whenever we want to manipulate that same element again.</p>

<p>In cases where you only want to call a few methods on the same element, there's another way that's even better. Want to know what it is? Come with me to the next chapter!</p>


<h3 id="tip-6-use-chained-methods-to-shorten-your-code">Tip #6: Use chained methods to shorten your code</h3>

<p>On the previous chapter we saw it's a good think to avoid repeating the same selector many times. We learned how to store the element in a variable. But when you want to call many short methods on the same element, there's an even better way to do it. A way that will spare you some lines of code.</p>

<p>Let's recall the code from the previous example:</p>

<div class="highlight">
<pre><span class="nx">first_element</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'.element:first'</span><span class="p">);</span>
<span class="nx">first_element</span><span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){...});</span>
<span class="nx">first_element</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">"myclass"</span><span class="p">);</span>
<span class="nx">first_element</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="s1">'slow'</span><span class="p">);</span>
</pre>
</div>


<p>Most jQuery methods return the element (or collection of elements) we gave it. This means we can simply call a new method right after the previous one. This is what the professional ninja experts call "chaining methods".</p>

<p>If you chain methods on your first selector, you don't even need to store the element in a variable. Let's try.</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'element:first'</span><span class="p">).</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){...}).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">'myClass'</span><span class="p">).</span><span class="nx">fadeIn</span><span class="p">(</span><span class="s1">'slow'</span><span class="p">);</span>
</pre>
</div>


<p>Just one single line of code! That's like magic! Why don't you use it every time? The problem of working like this is that you may end up with very very long lines of code. It makes your code ugly, and ugly code is not good.</p>

<p>If you still want to chain methods without storing the element and don't want a huge code, there's another option. You can break the line right before the dot. Let's try chaining methods with creating a huge line of code.</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'element:first'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">click</span><span class="p">(</span><span class="kd">function</span><span class="p">(){...})</span>
  <span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">'myClass'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="s1">'slow'</span><span class="p">);</span>
</pre>
</div>


<p>Between this and the method from the previous chapter you can use both, depending on the situation. Sometimes you will need a variable. Sometimes you can just chain them like you're getting a dollar for every chained method. Pick whatever makes your code easier to read and understand.</p>


<h3 id="tip-7-wait-for-the-whole-page-to-load">Tip #7: Wait for the whole page to load</h3>

<p>When you're using jQuery, most of the time you'll be manipulating DOM elements (those things on the page). Sometimes your JavaScript may load so fast that your code is going to be executed before the page is ready.</p>

<p>If you try to make that third paragraph blink and spin and zoom before your browser even knows a third paragraph is suposed to be there, you're going to run into trouble.</p>

<p>In these cases, there's a method to make you code wait for the entire page to load before it runs.</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// INSERT YOUR CODE HERE</span>
<span class="p">});</span>
</pre>
</div>


<p>Doing it like this, you can be 100% sure all your HTML and CSS content is loaded before your JavaScript does its magic.</p>

<p>There's also a shorter version for the code above. It's not my personal favorite, but here it is in case you like it better:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// INSERT YOUR CODE HERE</span>
<span class="p">});</span>
</pre>
</div>



<h3 id="tip-8-how-to-check-if-an-element-exists">Tip #8: How to check if an element exists</h3>

<p>Sometimes you want to do something but you don't know if an element exists. Since you can't manipulate the nothing, there are times when it's needed to check for the existence of an element.</p>

<p>Everytime you use a jQuery selector it sets a length property equal to the number of elements found. So if you want to know if an element exists you have to check if your selector found at least one.</p>

<div class="highlight">
<pre><span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.myclass'</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// DO SOMETHING HERE</span>
<span class="p">}</span>
</pre>
</div>


<p>In JavaScript, every number different from zero validates as true. This means you can leave out the <code>&gt; 0</code> part.</p>

<div class="highlight">
<pre><span class="k">if</span> <span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="s1">'.myclass'</span><span class="p">).</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// DO SOMETHING HERE</span>
<span class="p">}</span>
</pre>
</div>



<h3 id="tip-9-use-no-conflict-mode-to-avoid-guess-what-conflict">Tip #9: Use no-conflict mode to avoid... guess what... conflict!</h3>

<p>When you load jQuery, it creates a super mega powerful $ variable. It's short to type, it's visually different from the rest of the code, it's great.</p>

<p>The problem is that other some JavaScript frameworks are jealous and fat and decided to use the same $ variable. If you load jQuery and one of the other drunk and bald frameworks on the same page, both are claiming the $ variable as their own and then you've got a conflict.</p>

<p>As jQuery is a gentleman framework, it has a "no-conflict mode". When you load it in this mode it will not try to claim $, so other frameworks can do their jobs uninterrupted.</p>

<p>To activate no-conflict mode, you have to use the following code as soon as possible:</p>

<div class="highlight">
<pre><span class="nx">jQuery</span><span class="p">.</span><span class="nx">noConflict</span><span class="p">();</span>
</pre>
</div>


<p>It will make jQuery let go of the $ variable. Also, if some other framework had claimed $ before jQuery was loaded, jQuery will give back $ to that other framework as it were before jQuery was loaded. So remember, after you activate no-conflict mode, the $ variable will no more point to jQuery.</p>

<p>In these cases you can use the jQuery variable instead of $. If you go back to any example from previous chapters, you can safely replace every instance of <code>$</code> for <code>jQuery</code> and it will work just the same.</p>

<p>An example of code using jQuery instead of $:</p>

<div class="highlight">
<pre><span class="nx">jQuery</span><span class="p">(</span><span class="s1">'div#myid'</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">'myClass'</span><span class="p">);</span>
<span class="nx">jQuery</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({...});</span>
</pre>
</div>


<p>Now you can go ahead and use any other framework you want along jQuery and there'll be no conflict between them.</p>


<h3 id="tip-10-use-a-cheat-sheet">Tip #10: Use a cheat sheet!</h3>

<p>This is my last <strong>basic</strong> tip, but it's a very important one. jQuery is a big framework with lots and lots of options. Truste me, you will not memorize it all.</p>

<p>You will forget something important when you most need it. And it will happen more than once.</p>

<p>Do what every good professional do: cheat!</p>

<p>A cheat sheet is a compendium of the most important stuff, condensed in a few pages (sometimes even one). If you forget something, take a look at the cheat sheet and BAM you remember! You don't have to spend time googling for it.</p>

<p>The guys at Future Colors did an online cheat sheet and you can <a href="http://http://jqapi.ru/">see it here</a>.</p>

<p>If you want a PDF cheat sheet so you can print, frame and pin it to your wall, <a href="http://jqapi.ru/_static/jquery.cheatsheet.1.7.pdf">download it here</a>.</p>

<p>Some other good cheat sheets:</p>

<p><a href="http://colorcharge.com/jquery/">This one from Color Charge is an image</a></p>

<p>INCLUDE ONE MORE</p>

<p>Pick the one you like best and cheat!</p>


</div>
<div class="chapter">
<h2 id="intermediate-tips">Intermediate Tips</h2>

<p>There are not for your first day in the jQuery world.</p>


<h3 id="tip-11-create-elements-on-the-fly-with-ease">Tip #11: Create elements on the fly with ease</h3>

<p>There are moments when you need to create a new element and insert it into your page. You can do it the old JavaScript way (that's the way old people do, and it's ugly and wordy) or you can do it the beautiful way. If you prefer the latter, come with to the next paragraphs.</p>

<p>The first thing you should know is that you're going to use the same old $() function. Surprised, right? No? OK.</p>

<p>Let's pretend you have a need to insert a new link in your page. How do you create a new <code>&lt;a&gt;</code> element?</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;a&gt;'</span><span class="p">);</span>
</pre>
</div>


<p>Voilá! That small code is enough to tell jQuery you want to create an <code>&lt;a&gt;</code> tag. If you're a perceptive person you'll see this element is being created and discarded, because it's not being inserted anywhere in the page. Let's fix this.</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;a&gt;'</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">'p:first'</span><span class="p">);</span>
</pre>
</div>


<p>Ah, now we're on to something. We are creating a new empty <code>&lt;a&gt;</code> tag and inserting it at the end (<code>appendTo()</code>) of the first paragraph. You could use <code>prependTo()</code> to insert it at the beginning.</p>

<p>But our link is empty and boring! <em>How do I put stuff in my link?</em> you may ask. Stick with me and you'll see. To be continued...</p>

<p>...right now. We want to add at least 2 things to our link: a text and an address. Let's first do it the basic way.</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;a href="http://disney.com"&gt;Here be Mickey&lt;/a&gt;'</span><span class="p">).</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">'p:first'</span><span class="p">);</span>
</pre>
</div>


<p>See what I did there? I just declared an HTML tag inside $() just like I would do in HTML code. That's the most basic way of telling jQuery to create a new element. But there are two issues. First, when you want to create an element with a lot of attributes, this is going to become a very long line of code. Second, if you want to define programatically the value of these attributes, this is going to become a mess of string concatenation.</p>

<p>Being jQuery the beautiful framework it is, it gives us a better way to do this. Let's do again the previous <code>&lt;a&gt;</code> tag, this time with an id and a class, using the second method:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;a&gt;'</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">href</span><span class="o">:</span> <span class="s1">'http://disney.com'</span><span class="p">,</span>
  <span class="nx">text</span><span class="o">:</span> <span class="s1">'Here be Mickey'</span><span class="p">,</span>
  <span class="kr">class</span><span class="o">:</span> <span class="s1">'linkClass'</span><span class="p">,</span>
  <span class="nx">id</span><span class="o">:</span> <span class="s1">'mickey'</span>
<span class="p">}).</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">'p:first'</span><span class="p">);</span>
</pre>
</div>


<p>That is nicer, right? And it's easier to use a variable as the content of any attribute. To create your elements like this you just pass a second parameter, an anonymous object (also called a hash) containing the attributes you want it to be created with.</p>


<h3 id="tip-12-how-to-preload-images">Tip #12: How to preload images</h3>

<p>In dynamuc you want to dinamically show images to the user, it's a better practice to load the image before adding the <img> element to your page. This way the image will show up instantly, without the loading time.</p>

<p>This is called preloading and is very easy to do.</p>

<p>Whenever a new <img> element is created with a <code>src</code> attribute, your browser downloads the image. What's important is that it happens even if the element isn't anywhere in your page. This means we can create an <img> (read tip #12), store it in a variable (read tip #5) and the image will be already download when we finally insert it into our page.</p>

<p>Let's say we want to preload the image of a funny cat and append it to a paragraph when the user clicks on any link. Because every website gets better with cats.</p>

<p>We preload it by doing:</p>

<div class="highlight">
<pre><span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;img&gt;'</span><span class="p">,</span> <span class="p">{</span><span class="nx">src</span><span class="o">:</span> <span class="s1">'/funny-cat.jpg'</span><span class="p">});</span>
</pre>
</div>


<p>And then you can refer to the variable whenever you want to use it. It will already be preloaded.</p>

<div class="highlight">
<pre><span class="nx">image</span><span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="s1">'p:first'</span><span class="p">);</span>
</pre>
</div>


<p>Now go and make your dynamic images super fast!</p>


<h3 id="tip-13-do-something-when-an-image-has-been-loaded">Tip #13: Do something when an image has been loaded</h3>

<p>In tip #12 you learned how to dynamically preload images. But there is more to it. There are cases when you want to run a piece of code when the image is loaded. I once needed it myself when trying to make an image gallery and the solution is not very easy to find. So here I am to help you.</p>

<p>Images can fire a <code>load</code> event when they have been loaded, but you have to bind a callback to the event BEFORE you set the image's src. It's not technically necessary to do this, but some internet connections these days are so fast they may download the image before you are able to hook your function to that callback.
So follow my advice and set your callback first.</p>

<p>You can do this by using the <code>on</code> method like you would with any other method binding. If you learned jQuery in the old days, you may be using <code>bind</code> to do the same. If you do, please stop using <code>bind</code> and start to use <code>on</code>. It's the new default. Now to the code:</p>

<div class="highlight">
<pre><span class="c1">// We create an empty image element and store it in a variable</span>
<span class="kd">var</span> <span class="nx">image</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">'&lt;img&gt;'</span><span class="p">);</span>

<span class="c1">// We bind a function to the load event</span>
<span class="nx">image</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'load'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">"It's alive!!"</span><span class="p">);</span> <span class="c1">// Just a log to make sure it's working</span>
<span class="p">});</span>

<span class="c1">// We use jQuery's attr() method to change the src attribute.</span>
<span class="nx">image</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">'src'</span><span class="p">,</span> <span class="s1">'./funny-cat.jpg'</span><span class="p">);</span>
</pre>
</div>


<p>When we set the <code>src</code> attribute the image will be loaded and our function will be called.</p>


<h3 id="tip-14-use-animate-to-change-attributes-with-style">Tip #14: Use animate() to change attributes with style</h3>

<p>Not many people know this, but you can easily create an animation whenever you change visual CSS attributes of an element. Any numeric attribute change that can be visually perceived by the user can be animated.</p>

<p>Let's say you want to expand a div from 200px wide to 400px wide. Instead of just changing it, you can create a progressive animation where the width grows from 200 to 400.</p>

<p>Just look at the code below:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'#myDiv'</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="s2">"width"</span><span class="o">:</span> <span class="mi">400</span><span class="p">},</span> <span class="s2">"slow"</span><span class="p">);</span>
</pre>
</div>


<p>That's it. A simple code that animates my width growth slowly. You can use "normal" or "fast" instead of "slow". You can also use a number to define a duration in milliseconds.</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'#myDiv'</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="s2">"width"</span><span class="o">:</span> <span class="mi">400</span><span class="p">},</span> <span class="s2">"fast"</span><span class="p">);</span>
<span class="c1">// OR</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'#myDiv'</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="s2">"width"</span><span class="o">:</span> <span class="mi">400</span><span class="p">},</span> <span class="mi">3000</span><span class="p">);</span> <span class="c1">// The animation will take 3 seconds to finish</span>
</pre>
</div>


<p>If you want to animate multiple attributes at the same time, just declare more attributes inside the hash. Like this:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'#myDiv'</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="s2">"width"</span><span class="o">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s2">"height"</span><span class="o">:</span> <span class="mi">500</span><span class="p">,</span> <span class="s2">"opacity"</span><span class="o">:</span> <span class="mf">0.8</span><span class="p">},</span> <span class="s2">"slow"</span><span class="p">);</span>
</pre>
</div>


<p>Any CSS numeric attribute can be animated. Width, height, opacity, font size, etc. The list goes on and on.</p>

<p>It's important to note again that this only works on numeric attributes. Width is numeric, font-family is not. Background-color and font-color also cannot be animated unless you use a plugin.</p>

<p>Have fun!</p>


<h3 id="tip-15-use-delay-to-create-sequences-of-animations">Tip #15: Use delay to create sequences of animations</h3>

<p>In our previous tip we saw how to create an animation composed of one or more attribute change. But these changes happen at the same time. If you want to do two or more animations in sequence, you can't just call <code>animate()</code> after <code>animate()</code>.</p>

<p>Everytime you call <code>animate()</code>, a new animation <strong>starts</strong>. Take a look of the following code:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'#myDiv'</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="s2">"height"</span><span class="o">:</span> <span class="mi">400</span><span class="p">},</span><span class="s2">"slow"</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="nx">width</span><span class="o">:</span> <span class="mi">700</span><span class="p">},</span> <span class="s2">"fast"</span><span class="p">);</span>
</pre>
</div>


<p>The code above is similar to what many people do when trying to chain animations for the first time. But the results are not the expected. You are telling jQuery to begin the first animation and right after you tell it to begin the second one. Both animations will be happening at the same time and it's possible the second one may finish first (because it's <code>"fast"</code>).</p>

<p>This is not the result you want.</p>

<p>If you want the second animation to start only after the first one ends, there are two ways.</p>

<h4 id="first-method-function-as-a-parameter-of-animate">First Method: Function as a parameter of animate()</h4>

<p>The <code>animate()</code> method accepts a function. If you do pass one, it will call the function as soon as the animation stops. Look at the example below, where we get the effect we want:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'#myDiv'</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="s2">"height"</span><span class="o">:</span> <span class="mi">400</span><span class="p">,</span> <span class="s2">"slow"</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">animate</span><span class="p">({</span><span class="s2">"width"</span><span class="o">:</span> <span class="mi">700</span><span class="p">},</span> <span class="s2">"fast"</span><span class="p">);</span>
<span class="p">}});</span>
</pre>
</div>


<h4 id="second-method-use-delay">Second Method: Use delay()</h4>

<p>There are moments when you want to delay the second animation but you don't want it to begin exactly when the first one stops. Maybe you want it to begin a little sooner or later. The <code>delay()</code> method comes in handy.</p>

<p>This method takes a number as a parameter to define how many milliseconds it should delay execution of the next animation.</p>

<p>Let's say we want the first animation to have a duration of 3 seconds, and we want the second animation to begin half a second BEFORE the other one stops. Here's the code.</p>

<div class="highlight">
<pre><span class="c1">// Method chaining in several lines as seen on tip #6</span>
<span class="nx">$</span><span class="p">(</span><span class="s1">'#myDiv'</span><span class="p">).</span><span class="nx">animate</span><span class="p">({</span><span class="s2">"height"</span><span class="o">:</span> <span class="mi">400</span><span class="p">},</span> <span class="mi">3000</span><span class="p">)</span> <span class="c1">// First animation starts with 3s length</span>
  <span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="mi">2500</span><span class="p">)</span> <span class="c1">// We wait 2.5s</span>
  <span class="p">.</span><span class="nx">animate</span><span class="p">({</span><span class="s2">"width"</span><span class="o">:</span> <span class="mi">700</span><span class="p">},</span> <span class="s2">"fast"</span><span class="p">);</span> <span class="c1">// Second animation starts</span>
</pre>
</div>


<p>You can chain several <code>delay()</code> and <code>animate()</code> as you wish to create very complex multi-step animations.</p>


<h3 id="tip-16-how-to-prevent-the-default-behavior-in-events">Tip #16: How to prevent the default behavior in events</h3>

<p>When the user submits a form, he's redirect. If another user clicks on a link she goes to a new page. That's default behavior, right?</p>

<p>But what if you don't want it to happen? You don't want the form submission to redirect the user. You don't want the link to take her to another page (or even reload the same page).</p>

<p>What if you want to prevent the default behavior of the event? Again jQuery comes to the rescue.</p>

<p>First you should know this: when you create a function to handle an event, this function can get the event itself as its argument. You just have to declare it takes an argument, like this:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'a#myLink'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Do something</span>
<span class="p">});</span>
</pre>
</div>


<p>Did you see the <code>event</code> parameter over there? It will point to the instance of the event that triggered the function. So if a user clicks on that link, the <code>event</code> variable will refer to that exact click.</p>

<p>Now that you know this, you just have to know that every event in jQuery has a method called <code>preventDefault()</code>. If you call this method anywhere in your function, the default behavior will not happen.</p>

<p>Example:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'a#myLink'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">event</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span> <span class="c1">// Stops default behavior</span>
  <span class="nx">alert</span><span class="p">(</span><span class="s1">'You clicked me!'</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</div>


<p>By the code above, whenever a user clicks the link he will see the alert and that's it. No page redirect. If you call it on a form's submit event, it will not be submitted. On a link's click event, it will not redirect the user. And so on.</p>

<p>This is the basis of building dynamic user interfaces on your website. You can make links and buttons that do something else instead of redirecting the user somewhere else.</p>


<h3 id="tip-17-don-t-let-ajax-requests-capture-your-this">Tip #17: Don't let ajax requests capture your this</h3>


<h3 id="tip-18-set-ajax-defaults-to-standardize-ajax-requests">Tip #18: Set ajax defaults to standardize ajax requests</h3>

<p>I was once in a project where there was many different asynchronous interfaces on the same page. Any time the user clicked on something an ajax request was done and it would show a spinning wheel. I was not very experienced in jQuery at that time and I used many times the same code to show the wheel while waiting and then hide it again when the process was completed.</p>

<p>There's a smarter way. There are 3 very handy methods to deal with ajax requests: <code>ajaxSetup()</code>, <code>ajaxStart()</code> and <code>ajaxComplete()</code>.</p>

<h4 id="use-ajaxsetup-to-set-defaults">Use ajaxSetup() to set defaults</h4>

<p>You can use the <code>ajaxSetup()</code> method to set defaults that any ajax method will follow. You can pass it any parameter a normal ajax request would take, and then these parameters will be passed to any ajax method you call.</p>

<p>Look at the example:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">.</span><span class="nx">ajaxSetup</span><span class="p">({</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">'http://disney.com'</span><span class="p">,</span> <span class="c1">// Mickey likes ajax requests</span>
    <span class="nx">dataType</span><span class="o">:</span> <span class="s1">'json'</span> <span class="c1">// I want JSON unless I tell it otherwise</span>
<span class="p">});</span>
</pre>
</div>


<p>Now every ajax request I do on this page will have these two parameters as default. If I want a different dataType in one request, for example, I give it its own dataType parameter.</p>

<h4 id="ajaxstart-and-ajaxcomplete">ajaxStart() and ajaxComplete()</h4>

<p>These other two methods let you do something at the <strong>beginning</strong> and the <strong>end</strong> of ajax requests, respectively. Let's pretend we have a method <code>showIndicator()</code> to show a spinning wheel and another method called <code>disableButtons</code> that... well... disable buttons.</p>

<p>I want to disable buttons and show a spinning wheel while the request is pending. I want to revert it (hide wheel, enable buttons) when it's complete. Instead of repeating the code inside every request, I can do the following:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">.</span><span class="nx">ajaxStart</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">showIndicator</span><span class="p">();</span>
    <span class="nx">disableButtons</span><span class="p">();</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">ajaxComplete</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">enableButtons</span><span class="p">();</span>
    <span class="nx">hideIndicator</span><span class="p">();</span>
<span class="p">});</span>
</pre>
</div>


<p>That's nice and easy, right? You should be using these methods to save you some time when doing a lot of similar requests.</p>

<p>Some other similar methods you might find useful: <code>ajaxStop()</code>, <code>ajaxError()</code>, <code>ajaxSuccess</code>, <code>ajaxSend</code>.</p>


<h3 id="tip-19-live-events-can-bind-to-elements-in-the-future">Tip #19: Live events can bind to elements in the future</h3>

<p>The regular way to bind functions to events is nice, but it only affects elements that are already on the page when the binding happens. If you're working on a dynamic website where stuff gets added after the page is loaded, you need some way to make sure you're binding events of elements that will appear some time in the future.</p>

<p>Let's say you have a Task List website where tasks are added by javascript and you want to capture not only the events of existing tasks, but of every task yet to be added. Let's explore the <code>on()</code> method to know how to do that.</p>

<p>Since jQuery 1.7, the <code>on()</code> method is the default recommended method of binding events to functions. A regular binding of the click event works like this:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'a.task'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> 
    <span class="nx">alert</span><span class="p">(</span><span class="s1">'I was clicked!'</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</div>


<p>As we saw earlier, this is not enough to capture events of element in the future. To do what we want, it's important to first learn about event bubbling.</p>

<h4 id="event-bubbling">Event Bubbling</h4>

<p>Inside browsers, any uncaptured event bubbles up. Imagine you have the following HTML code:</p>

<div class="highlight">
<pre><span class="nt">&lt;div&gt;</span>
    <span class="nt">&lt;p&gt;</span>
        <span class="nt">&lt;a&gt;</span>Go to Disney!<span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre>
</div>


<p>When the user clicks on the link, a <code>click</code> event is fired. If there's nothing set up to capture click events in the <code>&lt;a&gt;</code> element, it will bubble up to our <code>&lt;p&gt;</code> element. If nothing captures the event, it will again bubble up to the <code>&lt;div&gt;</code> element. And it will keep going up the element tree, up to <code>&lt;body&gt;</code>, then <code>&lt;html&gt;</code> and then, if it's still not captured, it will fade away.</p>

<p>Why is this important? Because of event delegation!</p>

<h4 id="delegating-events">Delegating events</h4>

<p>How do we set up code to capture events on <strong>any</strong> task in our task list, including future ones? We tell its parent element to watch out for events! That's event delegation.</p>

<p>And how do we do this in jQuery? Look at the code below:</p>

<p>This is our HTML:</p>

<div class="highlight">
<pre><span class="nt">&lt;ul&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a&gt;</span>Task One<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a&gt;</span>Task Two<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a&gt;</span>Task Three<span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
<span class="nt">&lt;/ul&gt;</span>
</pre>
</div>


<p>And our javascript:</p>

<div class="highlight">
<pre><span class="nx">$</span><span class="p">(</span><span class="s1">'ul li'</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span> <span class="s1">'a'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">alert</span><span class="p">(</span><span class="s1">'a task was clicked!'</span><span class="p">);</span>
<span class="p">});</span>
</pre>
</div>


<p>If you look closely at the <code>on()</code> method, this time I used 3 parameters instead of just 2. Let me break it down and explain it bit by bit.</p>

<p>First of all I'm using the <code>on()</code> method on the <code>&lt;li&gt;</code> element. He will be the one watching for click events.</p>

<p>As the second parameter I used <code>'a'</code> to tell the <code>&lt;li&gt;</code> element it will be watching for click events on <code>&lt;a&gt;</code> elements. In the background, the following will happen: anytime an event bubbles up to our <code>&lt;li&gt;</code>, it will check where it originate from. If it came from any <code>&lt;a&gt;</code>, the function will be called.</p>

<p>This means it does not matter how many tasks I add to my list and when I add them, because the <code>&lt;li&gt;</code> will watch out for events in <strong>any</strong> <code>&lt;a&gt;</code> inside it.</p>


<h3 id="tip-20-use-the-right-event-binding-to-fit-your-needs">Tip #20: Use the right event binding to fit your needs</h3>


</div>
    </div>

    <div class="imprint container">
      <div>
        <h2>Better jQuery</h2>
        <p>Leonardo Bighi</p>
        <p>Copyright (C) 2012 Leonardo Bighi.</p>
      </div>
    </div>
  </body>
</html>
